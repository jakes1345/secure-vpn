================================================================================
üîç PRODUCTION-GRADE COMPLETE SYSTEM AUDIT
================================================================================
   ‚úÖ Connected!

================================================================================
1Ô∏è‚É£  AUDITING ALL PORTS
================================================================================
   Port 22: sshd
   Port 25: master
   Port 80: nginx
   Port 110: dovecot
   Port 143: dovecot
   Port 5000: gunicorn
   Port 443: nginx
   Port 465: master
   Port 587: master
   Port 628: master
   Port 41626: anydesk
   Port 995: dovecot
   Port 993: dovecot
   Port 6379: redis-server
   Port 10024: /usr/sbin/amavi
   Port 5900: x11vnc
   Port 783: spamd child
   Port 465: master
   Port 5003: python3
   Port 5002: python3
   Port 5001: python3
   Port 5005: python3
   Port 5004: python3
   Port 33060: mysqld
   Port 3306: mysqld
   Port 8082: docker-proxy
   Port 8081: python3
   Port 8080: gunicorn
   Port 43851: containerd
   Port 7070: anydesk
   Port 10024: /usr/sbin/amavi
   Port 22: sshd
   Port 80: nginx
   Port 783: spamd child
   Port 443: nginx
   Port 41626: anydesk
   Port 3389: xrdp
   Port 3350: xrdp-sesman
   Port 5900: x11vnc
   Port 8082: docker-proxy
   Port 6379: redis-server
   Port 7070: anydesk

   üìä Port Assignment Check:
   ‚úÖ web_portal: Port 5000 (correct)
   ‚úÖ nginx_http: Port 80 (correct)
   ‚úÖ nginx_https: Port 443 (correct)
   ‚ö†Ô∏è  openvpn: Port 1194 (not listening)
   ‚úÖ smtp: Port 25 (correct)
   ‚úÖ smtp_submission: Port 587 (correct)
   ‚úÖ imap: Port 143 (correct)
   ‚úÖ imaps: Port 993 (correct)
   ‚úÖ ssh: Port 22 (correct)
   ‚úÖ mysql: Port 3306 (correct)

================================================================================
2Ô∏è‚É£  AUDITING ALL SERVICES
================================================================================
   ‚úÖ phazevpn-portal: active
   ‚úÖ nginx: active
   ‚úÖ mysql: active
   ‚úÖ openvpn@server: active
   ‚úÖ postfix: active
   ‚úÖ dovecot: active
   ‚ùå fail2ban: failed

================================================================================
3Ô∏è‚É£  AUDITING CONFIGURATION FILES
================================================================================
   ‚úÖ web_portal: /opt/phaze-vpn/web-portal/app.py
   ‚úÖ nginx: /etc/nginx/sites-available/phazevpn
   ‚úÖ nginx_enabled: /etc/nginx/sites-enabled/phazevpn
   ‚úÖ openvpn: /opt/secure-vpn/config/server.conf
   ‚úÖ openvpn_systemd: /etc/openvpn/server.conf
   ‚úÖ mysql: /etc/mysql/mysql.conf.d/mysqld.cnf
   ‚úÖ postfix: /etc/postfix/main.cf
   ‚úÖ dovecot: /etc/dovecot/dovecot.conf
   ‚úÖ users: /opt/phaze-vpn/web-portal/users.json
   ‚úÖ portal_service: /etc/systemd/system/phazevpn-portal.service

================================================================================
4Ô∏è‚É£  CHECKING PORT 5000 (CRITICAL)
================================================================================
   ‚úÖ Port 5000 is localhost only (SECURE)
   ‚úÖ Service configured for localhost binding

================================================================================
5Ô∏è‚É£  CHECKING NGINX PROXY
================================================================================
   ‚úÖ Nginx proxies to localhost:5000

================================================================================
6Ô∏è‚É£  CHECKING FIREWALL
================================================================================
   ‚úÖ Port 5000 not in firewall (good - internal only)
   ‚ö†Ô∏è  Port 80 may not be allowed
   ‚ö†Ô∏è  Port 443 may not be allowed
   ‚ö†Ô∏è  Port 1194 may not be allowed
   ‚ö†Ô∏è  Port 22 may not be allowed

================================================================================
7Ô∏è‚É£  CREATING PRODUCTION CONFIGURATION
================================================================================

================================================================================
8Ô∏è‚É£  FIXING FIREWALL
================================================================================

üîß Removing port 5000 rule 29
   ‚úÖ Deleting:
 allow 5000/tcp comment 'REST API'
Proceed with operation (y|n)? Rule deleted (v6)

================================================================================
9Ô∏è‚É£  RESTARTING AND VERIFYING
================================================================================

üîß Reloading systemd

üîß Restarting portal
   ‚úÖ Port 5000 is now localhost only

================================================================================
üîü CREATING PRODUCTION DOCUMENTATION
================================================================================
   ‚úÖ Production documentation created

================================================================================
‚úÖ AUDIT COMPLETE
================================================================================

üìä Summary:
   Ports checked: 31
   Services checked: 7
   Configs checked: 10
   Issues found: 2
   Fixes applied: 1

‚ö†Ô∏è  Issues:
   - openvpn not on port 1194
   - fail2ban is failed

‚úÖ Fixes:
   - Removed port 5000 from firewall

üìÑ Full report: /opt/phaze-vpn/PRODUCTION-PORT-ASSIGNMENT.md
