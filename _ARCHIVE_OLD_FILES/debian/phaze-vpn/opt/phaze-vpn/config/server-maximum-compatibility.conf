# Secure VPN - Maximum Compatibility Configuration
# Same security as server.conf but with additional cipher options for older clients
# Use this ONLY if you have clients that can't connect with ChaCha20-Poly1305

# Server Configuration
port 1194
proto udp
dev tun
topology subnet
server 10.8.0.0 255.255.255.0

# Maximum Security Encryption with Compatibility Options
# Primary: ChaCha20-Poly1305 (fastest, most secure)
# Fallback: AES-256-GCM (excellent security, hardware accelerated)
# Additional: AES-128-GCM (for very old clients)
# NOTE: AES-256-CBC is NOT included (less secure, not recommended)
data-ciphers CHACHA20-POLY1305:AES-256-GCM:AES-128-GCM
cipher CHACHA20-POLY1305
auth SHA512
tls-version-min 1.3

# Enforce strongest TLS cipher suites
tls-cipher TLS-ECDHE-RSA-WITH-CHACHA20-POLY1305-SHA256
tls-cipher TLS-ECDHE-RSA-WITH-AES-256-GCM-SHA384
tls-cipher TLS-ECDHE-RSA-WITH-AES-128-GCM-SHA256

# Perfect Forward Secrecy - Maximum Strength
# Using 4096-bit DH for maximum security (prevents past session decryption)
# If dh4096.pem doesn't exist, run: ./generate-dh4096.sh
dh certs/dh4096.pem
# Fallback to 2048-bit if 4096-bit not available (less secure)
# dh certs/dh.pem
# ECDH with secp521r1 (521-bit elliptic curve - strongest available)
# Using tls-groups instead of ecdh-curve (recommended by OpenVPN)
tls-groups secp521r1

# Certificate Configuration
ca certs/ca.crt
cert certs/server.crt
key certs/server.key
tls-auth certs/ta.key 0

# Security Hardening
# user nobody
# group nobody
persist-key
persist-tun
remote-cert-tls client
verify-client-cert require

# Performance Optimization
tun-mtu 1500
mssfix 1450
sndbuf 2097152
rcvbuf 2097152
push "sndbuf 2097152"
push "rcvbuf 2097152"

# DNS and Privacy - VPN-NATIVE MAXIMUM ANONYMITY
# Use privacy-focused DNS (no logging)
push "dhcp-option DNS 1.1.1.1"
push "dhcp-option DNS 1.0.0.1"
push "block-outside-dns"
push "redirect-gateway def1"
# Block IPv6 to prevent leaks (critical for anonymity)
push "block-ipv6"
push "dhcp-option DNS6 ::"

# Logging and Monitoring - ZERO LOGGING FOR MAXIMUM PRIVACY
verb 3
status logs/openvpn-status.log
log-append logs/openvpn.log

# Connection Management
keepalive 10 120
max-clients 100

# Security Features
explicit-exit-notify 1
auth-nocache
reneg-sec 3600

# Compression (disabled for security)
comp-lzo no

