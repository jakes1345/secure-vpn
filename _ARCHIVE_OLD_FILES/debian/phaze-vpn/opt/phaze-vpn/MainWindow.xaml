<Window x:Class="SecureVPNClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="SecureVPN Professional" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen" 
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <materialDesign:BundledTheme BaseTheme="Dark" PrimaryColor="DeepPurple" SecondaryColor="Lime" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <materialDesign:ColorZone Mode="PrimaryMid" Grid.Row="0" Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <materialDesign:PackIcon Kind="ShieldLock" Width="32" Height="32" VerticalAlignment="Center"/>
                    <TextBlock Text="SecureVPN Professional" FontSize="24" FontWeight="Bold" 
                               VerticalAlignment="Center" Margin="16,0,0,0"/>
                </StackPanel>
                
                <TextBlock Grid.Column="2" Text="Military-Grade Encryption" FontSize="14" 
                           VerticalAlignment="Center" Opacity="0.8"/>
            </Grid>
        </materialDesign:ColorZone>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Panel - Connection Status -->
            <materialDesign:Card Grid.Column="0" Margin="0,0,16,0">
                <Grid Margin="16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="Connection Status" FontSize="18" FontWeight="Bold" Margin="0,0,0,16"/>
                    
                    <!-- VPN Status -->
                    <StackPanel Grid.Row="1" Margin="0,0,0,16">
                        <TextBlock Text="VPN Status:" FontWeight="SemiBold"/>
                        <Border x:Name="StatusIndicator" Background="Red" Width="20" Height="20" 
                                CornerRadius="10" Margin="0,8,0,0" HorizontalAlignment="Left"/>
                        <TextBlock x:Name="StatusText" Text="Disconnected" Margin="0,4,0,0"/>
                    </StackPanel>

                    <!-- Connection Button -->
                    <Button Grid.Row="2" x:Name="ConnectButton" Content="CONNECT" 
                            Style="{DynamicResource MaterialDesignRaisedButton}"
                            Background="{DynamicResource MaterialDesignPrimary}"
                            Foreground="White" Height="48" Margin="0,0,0,16"
                            Click="ConnectButton_Click"/>

                    <!-- Server Info -->
                    <StackPanel Grid.Row="3" Margin="0,0,0,16">
                        <TextBlock Text="Server:" FontWeight="SemiBold"/>
                        <TextBlock x:Name="ServerText" Text="localhost:1194" Margin="0,4,0,0"/>
                        <TextBlock Text="Protocol:" FontWeight="SemiBold" Margin="0,16,0,0"/>
                        <TextBlock x:Name="ProtocolText" Text="OpenVPN UDP" Margin="0,4,0,0"/>
                        <TextBlock Text="Encryption:" FontWeight="SemiBold" Margin="0,16,0,0"/>
                        <TextBlock x:Name="EncryptionText" Text="AES-256-GCM" Margin="0,4,0,0"/>
                    </StackPanel>

                    <!-- Quick Actions -->
                    <StackPanel Grid.Row="4">
                        <Button Content="Settings" Style="{DynamicResource MaterialDesignOutlinedButton}" 
                                Margin="0,0,0,8" Click="Settings_Click"/>
                        <Button Content="Web Admin" Style="{DynamicResource MaterialDesignOutlinedButton}" 
                                Margin="0,0,0,8" Click="WebAdmin_Click"/>
                        <Button Content="Generate Client Config" Style="{DynamicResource MaterialDesignOutlinedButton}" 
                                Margin="0,0,0,8" Click="GenerateConfig_Click"/>
                    </StackPanel>
                </Grid>
            </materialDesign:Card>

            <!-- Right Panel - Monitoring & Control -->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Tab Control -->
                <materialDesign:Card Grid.Row="0" Margin="0,0,0,16">
                    <TabControl x:Name="MainTabControl" Style="{DynamicResource MaterialDesignNavigatilRailTabControl}">
                        <TabItem Header="Real-time Monitoring">
                            <Grid Margin="16">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- Performance Metrics -->
                                <WrapPanel Grid.Row="0" Margin="0,0,0,16">
                                    <materialDesign:Card Margin="0,0,16,0" Width="200">
                                        <Grid Margin="16">
                                            <TextBlock Text="Download Speed" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="DownloadSpeedText" Text="0 Mbps" FontSize="24" 
                                                       Foreground="{DynamicResource MaterialDesignPrimary}" Margin="0,8,0,0"/>
                                        </Grid>
                                    </materialDesign:Card>
                                    
                                    <materialDesign:Card Margin="0,0,16,0" Width="200">
                                        <Grid Margin="16">
                                            <TextBlock Text="Upload Speed" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="UploadSpeedText" Text="0 Mbps" FontSize="24" 
                                                       Foreground="{DynamicResource MaterialDesignSecondary}" Margin="0,8,0,0"/>
                                        </Grid>
                                    </materialDesign:Card>
                                    
                                    <materialDesign:Card Margin="0,0,16,0" Width="200">
                                        <Grid Margin="16">
                                            <TextBlock Text="Latency" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="LatencyText" Text="0 ms" FontSize="24" 
                                                       Foreground="{DynamicResource MaterialDesignAccent}" Margin="0,8,0,0"/>
                                        </Grid>
                                    </materialDesign:Card>
                                    
                                    <materialDesign:Card Width="200">
                                        <Grid Margin="16">
                                            <TextBlock Text="CPU Usage" FontWeight="SemiBold"/>
                                            <TextBlock x:Name="CpuUsageText" Text="0%" FontSize="24" 
                                                       Foreground="Orange" Margin="0,8,0,0"/>
                                        </Grid>
                                    </materialDesign:Card>
                                </WrapPanel>

                                <!-- Connection Graph -->
                                <materialDesign:Card Grid.Row="1" Margin="0,0,0,16">
                                    <Grid Margin="16">
                                        <TextBlock Text="Connection Performance" FontWeight="SemiBold" Margin="0,0,0,16"/>
                                        <Canvas x:Name="PerformanceCanvas" Height="200" Background="Transparent"/>
                                    </Grid>
                                </materialDesign:Card>

                                <!-- Active Connections -->
                                <materialDesign:Card Grid.Row="2">
                                    <Grid Margin="16">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        
                                        <TextBlock Grid.Row="0" Text="Active Connections" FontWeight="SemiBold" Margin="0,0,0,16"/>
                                        <DataGrid Grid.Row="1" x:Name="ConnectionsDataGrid" AutoGenerateColumns="False" 
                                                  IsReadOnly="True" Height="200">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Client IP" Binding="{Binding ClientIP}"/>
                                                <DataGridTextColumn Header="Connected" Binding="{Binding ConnectedTime}"/>
                                                <DataGridTextColumn Header="Data Sent" Binding="{Binding DataSent}"/>
                                                <DataGridTextColumn Header="Data Received" Binding="{Binding DataReceived}"/>
                                                <DataGridTextColumn Header="Status" Binding="{Binding Status}"/>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </Grid>
                                </materialDesign:Card>
                            </Grid>
                        </TabItem>

                        <TabItem Header="Security & Privacy">
                            <Grid Margin="16">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Security Features -->
                                <materialDesign:Card Grid.Row="0" Margin="0,0,0,16">
                                    <Grid Margin="16">
                                        <TextBlock Text="Security Features" FontWeight="SemiBold" Margin="0,0,0,16"/>
                                        <StackPanel>
                                            <CheckBox x:Name="KillSwitchCheckBox" Content="Kill Switch (Block traffic when VPN disconnects)" 
                                                      IsChecked="True" Margin="0,0,0,8"/>
                                            <CheckBox x:Name="DnsLeakProtectionCheckBox" Content="DNS Leak Protection" 
                                                      IsChecked="True" Margin="0,0,0,8"/>
                                            <CheckBox x:Name="TorRoutingCheckBox" Content="TOR Network Routing" 
                                                      IsChecked="False" Margin="0,0,0,8"/>
                                            <CheckBox x:Name="SplitTunnelingCheckBox" Content="Split Tunneling" 
                                                      IsChecked="False" Margin="0,0,0,8"/>
                                            <CheckBox x:Name="TrafficObfuscationCheckBox" Content="Traffic Obfuscation" 
                                                      IsChecked="True" Margin="0,0,0,8"/>
                                        </StackPanel>
                                    </Grid>
                                </materialDesign:Card>

                                <!-- Privacy Settings -->
                                <materialDesign:Card Grid.Row="1" Margin="0,0,0,16">
                                    <Grid Margin="16">
                                        <TextBlock Text="Privacy Settings" FontWeight="SemiBold" Margin="0,0,0,16"/>
                                        <StackPanel>
                                            <TextBlock Text="DNS Servers:" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                            <ComboBox x:Name="DnsServerComboBox" Margin="0,0,0,16">
                                                <ComboBoxItem Content="Cloudflare (1.1.1.1, 1.0.0.1)"/>
                                                <ComboBoxItem Content="Google (8.8.8.8, 8.8.4.4)"/>
                                                <ComboBoxItem Content="Quad9 (9.9.9.9, 149.112.112.112)"/>
                                                <ComboBoxItem Content="Custom"/>
                                            </ComboBox>
                                            
                                            <TextBlock Text="Logging Level:" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                            <ComboBox x:Name="LoggingLevelComboBox" Margin="0,0,0,16">
                                                <ComboBoxItem Content="None (Privacy Mode)"/>
                                                <ComboBoxItem Content="Minimal"/>
                                                <ComboBoxItem Content="Standard"/>
                                                <ComboBoxItem Content="Verbose"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </Grid>
                                </materialDesign:Card>

                                <!-- Security Status -->
                                <materialDesign:Card Grid.Row="2">
                                    <Grid Margin="16">
                                        <TextBlock Text="Security Status" FontWeight="SemiBold" Margin="0,0,0,16"/>
                                        <StackPanel>
                                            <TextBlock x:Name="EncryptionStatusText" Text="✓ AES-256-GCM Encryption Active" 
                                                       Foreground="Green" Margin="0,0,0,8"/>
                                            <TextBlock x:Name="CertificateStatusText" Text="✓ SSL Certificate Valid" 
                                                       Foreground="Green" Margin="0,0,0,8"/>
                                            <TextBlock x:Name="FirewallStatusText" Text="✓ Firewall Rules Active" 
                                                       Foreground="Green" Margin="0,0,0,8"/>
                                            <TextBlock x:Name="DnsStatusText" Text="✓ DNS Leak Protection Active" 
                                                       Foreground="Green" Margin="0,0,0,8"/>
                                        </StackPanel>
                                    </Grid>
                                </materialDesign:Card>
                            </Grid>
                        </TabItem>

                        <TabItem Header="Server Management">
                            <Grid Margin="16">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- Server Controls -->
                                <materialDesign:Card Grid.Row="0" Margin="0,0,0,16">
                                    <Grid Margin="16">
                                        <TextBlock Text="Server Controls" FontWeight="SemiBold" Margin="0,0,0,16"/>
                                        <WrapPanel>
                                            <Button Content="Start Server" Style="{DynamicResource MaterialDesignRaisedButton}" 
                                                    Margin="0,0,16,0" Click="StartServer_Click"/>
                                            <Button Content="Stop Server" Style="{DynamicResource MaterialDesignRaisedButton}" 
                                                    Margin="0,0,16,0" Click="StopServer_Click"/>
                                            <Button Content="Restart Server" Style="{DynamicResource MaterialDesignRaisedButton}" 
                                                    Margin="0,0,16,0" Click="RestartServer_Click"/>
                                            <Button Content="View Logs" Style="{DynamicResource MaterialDesignOutlinedButton}" 
                                                    Click="ViewLogs_Click"/>
                                        </WrapPanel>
                                    </Grid>
                                </materialDesign:Card>

                                <!-- Server Statistics -->
                                <materialDesign:Card Grid.Row="1" Margin="0,0,0,16">
                                    <Grid Margin="16">
                                        <TextBlock Text="Server Statistics" FontWeight="SemiBold" Margin="0,0,0,16"/>
                                        <WrapPanel>
                                            <StackPanel Margin="0,0,32,0">
                                                <TextBlock Text="Uptime" FontWeight="SemiBold"/>
                                                <TextBlock x:Name="UptimeText" Text="0 days, 0 hours" Margin="0,4,0,0"/>
                                            </StackPanel>
                                            <StackPanel Margin="0,0,32,0">
                                                <TextBlock Text="Total Connections" FontWeight="SemiBold"/>
                                                <TextBlock x:Name="TotalConnectionsText" Text="0" Margin="0,4,0,0"/>
                                            </StackPanel>
                                            <StackPanel Margin="0,0,32,0">
                                                <TextBlock Text="Data Transferred" FontWeight="SemiBold"/>
                                                <TextBlock x:Name="DataTransferredText" Text="0 GB" Margin="0,4,0,0"/>
                                            </StackPanel>
                                            <StackPanel>
                                                <TextBlock Text="Active Users" FontWeight="SemiBold"/>
                                                <TextBlock x:Name="ActiveUsersText" Text="0" Margin="0,4,0,0"/>
                                            </StackPanel>
                                        </WrapPanel>
                                    </Grid>
                                </materialDesign:Card>

                                <!-- Configuration -->
                                <materialDesign:Card Grid.Row="2">
                                    <Grid Margin="16">
                                        <TextBlock Text="Server Configuration" FontWeight="SemiBold" Margin="0,0,0,16"/>
                                        <StackPanel>
                                            <TextBlock Text="Port:" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                            <TextBox x:Name="PortTextBox" Text="1194" Margin="0,0,0,16"/>
                                            
                                            <TextBlock Text="Protocol:" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                            <ComboBox x:Name="ProtocolComboBox" Margin="0,0,0,16">
                                                <ComboBoxItem Content="UDP (Recommended)"/>
                                                <ComboBoxItem Content="TCP"/>
                                            </ComboBox>
                                            
                                            <TextBlock Text="Max Clients:" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                            <TextBox x:Name="MaxClientsTextBox" Text="100" Margin="0,0,0,16"/>
                                            
                                            <Button Content="Apply Configuration" Style="{DynamicResource MaterialDesignRaisedButton}" 
                                                    HorizontalAlignment="Left" Click="ApplyConfig_Click"/>
                                        </StackPanel>
                                    </Grid>
                                </materialDesign:Card>
                            </Grid>
                        </TabItem>
                    </TabControl>
                </materialDesign:Card>
            </Grid>
        </Grid>

        <!-- Status Bar -->
        <materialDesign:ColorZone Mode="PrimaryLight" Grid.Row="2" Padding="16,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" x:Name="StatusBarText" Text="Ready - Military-grade encryption active" 
                           VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="v1.0.0" VerticalAlignment="Center" Opacity="0.7" Margin="0,0,16,0"/>
                    <materialDesign:PackIcon Kind="ShieldCheck" Width="16" Height="16" 
                                             VerticalAlignment="Center" Opacity="0.7"/>
                </StackPanel>
            </Grid>
        </materialDesign:ColorZone>
    </Grid>
</Window>
