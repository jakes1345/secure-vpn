#!/bin/bash
# PhazeOS First Boot Privacy Wizard
# Educates users about privacy and sets up VPN

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "       WELCOME TO PHAZEOS!"
echo "   The Ultimate Privacy Powerhouse"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
sleep 2

echo "ðŸŽ¯ PhazeOS comes with EVERYTHING you need:"
echo ""
echo "  âœ… PhazeBrowser - Better than Chrome, zero tracking"
echo "  âœ… Steam & Lutris - Gaming without Windows"
echo "  âœ… VS Code & Docker - Development tools"
echo "  âœ… Ollama AI - Local AI assistant"
echo "  âœ… Hacking tools - Nmap, Wireshark, etc."
echo "  âœ… VPN built-in - Always private"
echo ""
sleep 3

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "       âš ï¸  PRIVACY RULES âš ï¸"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âŒ DON'T install Chrome, Opera, or Edge"
echo "   â†’ Use PhazeBrowser instead (same features, zero tracking)"
echo ""
echo "âŒ DON'T sign into Google/Microsoft accounts"
echo "   â†’ Use PhazeCloud sync instead (your VPS)"
echo ""
echo "âŒ DON'T install Discord, Zoom, or Skype"
echo "   â†’ Use Element (Matrix) or Jitsi Meet instead"
echo ""
echo "âŒ DON'T disable the VPN"
echo "   â†’ Everything routes through VPN for your safety"
echo ""
sleep 5

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "       ðŸ›¡ï¸  PRIVACY FEATURES ðŸ›¡ï¸"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "PhazeOS protects you with:"
echo ""
echo "  ðŸ”’ VPN Kill Switch - Blocks internet if VPN drops"
echo "  ðŸ›¡ï¸  Privacy Guardian - Warns about tracking software"
echo "  ðŸ‘» Ghost Mode - Route through Tor network"
echo "  ðŸŽ­ Phaze Mode - Privacy lockdown (clear data, randomize MAC)"
echo "  ðŸ” PhazeBrowser - VPN-enforced browsing"
echo ""
sleep 3

read -p "Press ENTER to set up your VPN..."
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "       VPN SETUP"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Do you have a PhazeVPN account?"
echo ""
echo "  1) Yes - I have an account"
echo "  2) No - Create account at phazevpn.com"
echo "  3) Skip for now"
echo ""
read -p "Choose [1-3]: " choice

case $choice in
    1)
        echo ""
        read -p "Email: " email
        read -sp "Password: " password
        echo ""
        
        # Save credentials
        mkdir -p ~/.config/phazevpn
        cat > ~/.config/phazevpn/config.json << EOF
{
  "email": "$email",
  "server": "phazevpn.com",
  "protocol": "wireguard",
  "auto_connect": true,
  "dns_leak_protection": true,
  "kill_switch": true
}
EOF
        
        echo "âœ… VPN configured!"
        echo ""
        echo "Connecting to VPN..."
        phazevpn-gui --connect &
        sleep 3
        ;;
    2)
        echo ""
        echo "Visit: https://phazevpn.com"
        echo "Then run: phazevpn-cli login"
        ;;
    3)
        echo ""
        echo "âš ï¸  You can set up VPN later with: phazevpn-cli login"
        ;;
esac

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "       INSTALL PROTECTION LAYERS?"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Recommended protection:"
echo ""
echo "  1) VPN Kill Switch - Block internet if VPN drops"
echo "  2) Privacy Guardian - Warn about tracking software"
echo "  3) Both (recommended)"
echo "  4) Skip"
echo ""
read -p "Choose [1-4]: " protection

case $protection in
    1)
        sudo phazeos-install-killswitch
        ;;
    2)
        sudo phazeos-install-privacy-guardian
        ;;
    3)
        sudo phazeos-install-killswitch
        sudo phazeos-install-privacy-guardian
        ;;
    4)
        echo "âš ï¸  You can install later from the PhazeOS Features menu"
        ;;
esac

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "       INSTALL AI ASSISTANT?"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Ollama (Local AI) - 100% private, runs on your machine"
echo ""
echo "  â€¢ Ask questions: phaze-ai \"how do I...\""
echo "  â€¢ Code help: phaze-ai \"write a Python script\""
echo "  â€¢ System help: phaze-ai \"fix my wifi\""
echo ""
read -p "Install Ollama AI? [Y/n]: " install_ai

if [[ ! $install_ai =~ ^[Nn]$ ]]; then
    sudo phazeos-install-ollama
fi

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "       âœ… SETUP COMPLETE!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ðŸŽ‰ Welcome to PhazeOS!"
echo ""
echo "Quick Start:"
echo "  â€¢ Browse: phazebrowser"
echo "  â€¢ VPN: phazevpn-cli status"
echo "  â€¢ Features: phazeos-features"
echo "  â€¢ AI: phaze-ai \"your question\""
echo ""
echo "Unique Modes:"
echo "  â€¢ sudo phaze-mode    - Privacy lockdown"
echo "  â€¢ sudo ghost-mode    - Tor network"
echo "  â€¢ sudo gaming-mode   - Performance boost"
echo "  â€¢ sudo dev-mode      - Development setup"
echo ""
echo "Remember:"
echo "  âœ… Use PhazeBrowser, not Chrome"
echo "  âœ… Keep VPN connected"
echo "  âœ… Don't sign into Google/Microsoft"
echo "  âœ… Install from official repos only"
echo ""
echo "Need help? Visit: https://phazevpn.com/support"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
